- name: Create github directory
  ansible.builtin.file:
    path: "{{ base_path }}"
    state: directory
    force: true
    mode: "0755"

- name: Clone dotfiles
  ansible.builtin.git:
    repo: "{{ item.repo }}"
    dest: "{{ item.dest }}"
    force: true
  with_items: "{{ repository }}"

- name: Create symlinks
  ansible.builtin.command: bash -lc "{{ run_dotfiles }}"
  changed_when: false
  register: install_dotfiles

- name: "Debug show result"
  ansible.builtin.debug:
    msg: "{{ install_dotfiles.stdout_lines }}"
  when: install_dotfiles.stdout != ""
